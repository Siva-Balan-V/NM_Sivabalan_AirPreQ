{% extends "base.html" %}
{% block content %}
<h1>Upload Dataset for Analysis</h1>
<form method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept=".csv" required>
    <button type="submit">Upload & Analyze</button>
</form>

{% if rmse_lr %}
    <h2>Linear Regression Results</h2>
    <p>RMSE: {{ rmse_lr }}</p>
    <p>R²: {{ r2_lr }}</p>
{% endif %}

{% if rmse_rf %}
    <h2>Random Forest Results</h2>
    <p>RMSE: {{ rmse_rf }}</p>
    <p>R²: {{ r2_rf }}</p>
{% endif %}

{% if corr_json %}
    <h2>Correlation Heatmap</h2>
    <div id="corr_heatmap"></div>
    <h2>AQI Trend</h2>
    <div id="aqi_trend"></div>
    <h2>Feature Importance</h2>
    <div id="feature_importance"></div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        var corrData = {{ corr_json|safe }};
        var aqiTrendData = {{ aq_trend_json|safe }};
        var featImpData = {{ feat_imp_json|safe }};

        Plotly.newPlot('corr_heatmap', corrData.data, corrData.layout);
        Plotly.newPlot('aqi_trend', aqiTrendData.data, aqiTrendData.layout);
        Plotly.newPlot('feature_importance', featImpData.data, featImpData.layout);
    </script>
{% endif %}
{% endblock %}
